MODULE tehb(ins, ins_valid, outs_ready)
VAR full : boolean;
VAR dataReg : integer;
VAR inner_tehb : tehb_dataless(ins_valid, outs_ready);
DEFINE regEnable := ins_ready & ins_valid & !outs_ready
DEFINE ins_ready := inner_tehb.ins_ready;
DEFINE outs_valid := inner_tehb.outs_valid;
DEFINE outs := full ? dataReg : ins;
ASSIGN
init(dataReg) := 0;
next(dataReg) := regEnable ? ins : dataReg;
init(full) := FALSE;
next(full) := outs_valid and not outs_ready;
